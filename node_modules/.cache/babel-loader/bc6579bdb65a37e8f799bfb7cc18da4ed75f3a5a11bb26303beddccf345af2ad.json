{"ast":null,"code":"var _jsxFileName = \"/Users/cmahidhrahrajendran/Projects/YJS-trial/frontend/src/CodingEditor.js\",\n  _s = $RefreshSig$();\nimport * as Y from \"yjs\";\nimport { yCollab } from \"y-codemirror.next\";\nimport { WebsocketProvider } from \"y-websocket\";\nimport { EditorView, basicSetup } from \"codemirror\";\nimport { EditorState } from \"@codemirror/state\";\nimport { javascript } from \"@codemirror/lang-javascript\";\nimport { useEffect, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CodingEditor() {\n  _s();\n  const elementRef = useRef(null);\n  useEffect(() => {\n    // Initialize YJS document\n    const ydoc = new Y.Doc();\n\n    // Set up WebSocket provider to connect to local server on ws://localhost:1234\n    const provider = new WebsocketProvider(\"ws://localhost:1234\",\n    // Local WebSocket server URL\n    \"room123\",\n    // Room name for collaboration\n    ydoc // YJS document\n    );\n\n    // Log WebSocket connection status\n    provider.on(\"status\", event => {\n      console.log(\"WebSocket status:\", event.status); // Logs \"connected\" or \"disconnected\"\n    });\n\n    // Create a shared text type for CodeMirror binding\n    const yText = ydoc.getText(\"codemirror\");\n    const undoManager = new Y.UndoManager(yText);\n\n    // Set a placeholder user for testing\n    provider.awareness.setLocalStateField(\"user\", {\n      name: \"Local User\",\n      color: \"#30bced\",\n      colorLight: \"#30bced33\"\n    });\n\n    // Define CodeMirror editor appearance\n    const fixedHeightEditor = EditorView.theme({\n      \"&\": {\n        height: \"100%\"\n      },\n      \".cm-scroller\": {\n        overflow: \"auto\"\n      }\n    });\n\n    // Create the initial state for CodeMirror with YJS collaboration\n    const state = EditorState.create({\n      doc: yText.toString(),\n      extensions: [basicSetup, javascript(), fixedHeightEditor, yCollab(yText, provider.awareness, {\n        undoManager\n      })]\n    });\n\n    // Initialize the editor view\n    const view = new EditorView({\n      state,\n      parent: elementRef.current\n    });\n\n    // Cleanup on component unmount\n    return () => {\n      ydoc.destroy();\n      provider.disconnect();\n      view.destroy();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: elementRef,\n    style: {\n      height: \"100%\",\n      width: \"50vw\",\n      border: \"1px solid #000\",\n      margin: \"0 auto\"\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(CodingEditor, \"CKe/C9l/PZDcdMrjDfTWxieUegY=\");\n_c = CodingEditor;\nvar _c;\n$RefreshReg$(_c, \"CodingEditor\");","map":{"version":3,"names":["Y","yCollab","WebsocketProvider","EditorView","basicSetup","EditorState","javascript","useEffect","useRef","jsxDEV","_jsxDEV","CodingEditor","_s","elementRef","ydoc","Doc","provider","on","event","console","log","status","yText","getText","undoManager","UndoManager","awareness","setLocalStateField","name","color","colorLight","fixedHeightEditor","theme","height","overflow","state","create","doc","toString","extensions","view","parent","current","destroy","disconnect","ref","style","width","border","margin","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/cmahidhrahrajendran/Projects/YJS-trial/frontend/src/CodingEditor.js"],"sourcesContent":["import * as Y from \"yjs\";\nimport { yCollab } from \"y-codemirror.next\";\nimport { WebsocketProvider } from \"y-websocket\";\nimport { EditorView, basicSetup } from \"codemirror\";\nimport { EditorState } from \"@codemirror/state\";\nimport { javascript } from \"@codemirror/lang-javascript\";\nimport { useEffect, useRef } from \"react\";\n\nexport default function CodingEditor() {\n  const elementRef = useRef(null);\n\n  useEffect(() => {\n    // Initialize YJS document\n    const ydoc = new Y.Doc();\n\n    // Set up WebSocket provider to connect to local server on ws://localhost:1234\n    const provider = new WebsocketProvider(\n      \"ws://localhost:1234\", // Local WebSocket server URL\n      \"room123\",              // Room name for collaboration\n      ydoc                     // YJS document\n    );\n\n    // Log WebSocket connection status\n    provider.on(\"status\", (event) => {\n      console.log(\"WebSocket status:\", event.status); // Logs \"connected\" or \"disconnected\"\n    });\n\n    // Create a shared text type for CodeMirror binding\n    const yText = ydoc.getText(\"codemirror\");\n    const undoManager = new Y.UndoManager(yText);\n\n    // Set a placeholder user for testing\n    provider.awareness.setLocalStateField(\"user\", {\n      name: \"Local User\",\n      color: \"#30bced\",\n      colorLight: \"#30bced33\",\n    });\n\n    // Define CodeMirror editor appearance\n    const fixedHeightEditor = EditorView.theme({\n      \"&\": { height: \"100%\" },\n      \".cm-scroller\": { overflow: \"auto\" },\n    });\n\n    // Create the initial state for CodeMirror with YJS collaboration\n    const state = EditorState.create({\n      doc: yText.toString(),\n      extensions: [\n        basicSetup,\n        javascript(),\n        fixedHeightEditor,\n        yCollab(yText, provider.awareness, { undoManager }),\n      ],\n    });\n\n    // Initialize the editor view\n    const view = new EditorView({\n      state,\n      parent: elementRef.current,\n    });\n\n    // Cleanup on component unmount\n    return () => {\n      ydoc.destroy();\n      provider.disconnect();\n      view.destroy();\n    };\n  }, []);\n\n  return (\n    <div\n      ref={elementRef}\n      style={{\n        height: \"100%\",\n        width: \"50vw\",\n        border: \"1px solid #000\",\n        margin: \"0 auto\",\n      }}\n    />\n  );\n}"],"mappings":";;AAAA,OAAO,KAAKA,CAAC,MAAM,KAAK;AACxB,SAASC,OAAO,QAAQ,mBAAmB;AAC3C,SAASC,iBAAiB,QAAQ,aAAa;AAC/C,SAASC,UAAU,EAAEC,UAAU,QAAQ,YAAY;AACnD,SAASC,WAAW,QAAQ,mBAAmB;AAC/C,SAASC,UAAU,QAAQ,6BAA6B;AACxD,SAASC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1C,eAAe,SAASC,YAAYA,CAAA,EAAG;EAAAC,EAAA;EACrC,MAAMC,UAAU,GAAGL,MAAM,CAAC,IAAI,CAAC;EAE/BD,SAAS,CAAC,MAAM;IACd;IACA,MAAMO,IAAI,GAAG,IAAId,CAAC,CAACe,GAAG,CAAC,CAAC;;IAExB;IACA,MAAMC,QAAQ,GAAG,IAAId,iBAAiB,CACpC,qBAAqB;IAAE;IACvB,SAAS;IAAe;IACxBY,IAAI,CAAqB;IAC3B,CAAC;;IAED;IACAE,QAAQ,CAACC,EAAE,CAAC,QAAQ,EAAGC,KAAK,IAAK;MAC/BC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEF,KAAK,CAACG,MAAM,CAAC,CAAC,CAAC;IAClD,CAAC,CAAC;;IAEF;IACA,MAAMC,KAAK,GAAGR,IAAI,CAACS,OAAO,CAAC,YAAY,CAAC;IACxC,MAAMC,WAAW,GAAG,IAAIxB,CAAC,CAACyB,WAAW,CAACH,KAAK,CAAC;;IAE5C;IACAN,QAAQ,CAACU,SAAS,CAACC,kBAAkB,CAAC,MAAM,EAAE;MAC5CC,IAAI,EAAE,YAAY;MAClBC,KAAK,EAAE,SAAS;MAChBC,UAAU,EAAE;IACd,CAAC,CAAC;;IAEF;IACA,MAAMC,iBAAiB,GAAG5B,UAAU,CAAC6B,KAAK,CAAC;MACzC,GAAG,EAAE;QAAEC,MAAM,EAAE;MAAO,CAAC;MACvB,cAAc,EAAE;QAAEC,QAAQ,EAAE;MAAO;IACrC,CAAC,CAAC;;IAEF;IACA,MAAMC,KAAK,GAAG9B,WAAW,CAAC+B,MAAM,CAAC;MAC/BC,GAAG,EAAEf,KAAK,CAACgB,QAAQ,CAAC,CAAC;MACrBC,UAAU,EAAE,CACVnC,UAAU,EACVE,UAAU,CAAC,CAAC,EACZyB,iBAAiB,EACjB9B,OAAO,CAACqB,KAAK,EAAEN,QAAQ,CAACU,SAAS,EAAE;QAAEF;MAAY,CAAC,CAAC;IAEvD,CAAC,CAAC;;IAEF;IACA,MAAMgB,IAAI,GAAG,IAAIrC,UAAU,CAAC;MAC1BgC,KAAK;MACLM,MAAM,EAAE5B,UAAU,CAAC6B;IACrB,CAAC,CAAC;;IAEF;IACA,OAAO,MAAM;MACX5B,IAAI,CAAC6B,OAAO,CAAC,CAAC;MACd3B,QAAQ,CAAC4B,UAAU,CAAC,CAAC;MACrBJ,IAAI,CAACG,OAAO,CAAC,CAAC;IAChB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEjC,OAAA;IACEmC,GAAG,EAAEhC,UAAW;IAChBiC,KAAK,EAAE;MACLb,MAAM,EAAE,MAAM;MACdc,KAAK,EAAE,MAAM;MACbC,MAAM,EAAE,gBAAgB;MACxBC,MAAM,EAAE;IACV;EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEN;AAACzC,EAAA,CAxEuBD,YAAY;AAAA2C,EAAA,GAAZ3C,YAAY;AAAA,IAAA2C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}